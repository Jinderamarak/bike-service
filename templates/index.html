{% extends "base.html" %}

{% block header %}
{% include "navigation.html" %}
{% endblock %}
{% block content %}

<div class="flex flex-col md:flex-row gap-2 p-2">
    <form hx-post="/ride" hx-swap="beforeend" class="rounded-lg border-solid border flex flex-col px-4 py-2">
        <label class="w-full flex flex-row py-2">
            <span class="grow">Date</span>
            <input name="date" type="date" value="{{ today }}">
        </label>
        <label class="w-full flex flex-row py-2 gap-4">
            <span>Distance</span>
            <input name="distance" type="number" step="0.001" placeholder="[km]" class="grow text-right">
        </label>
        <label class="w-full flex flex-col py-2 gap-2">
            <span class="sr-only">Description</span>
            <textarea name="description" placeholder="Description [optional]"
                      class="min-h-8 border rounded-lg p-2"></textarea>
        </label>
        <input type="submit" value="Add"
               class="rounded-lg bg-neutral-900 text-white hover:bg-neutral-600 font-bold py-2 cursor-pointer transition-colors">
    </form>
    <div class="flex flex-col gap-2 grow min-w-0">
        <div class="rounded-lg border flex flex-row p-4 text-lg">
            <h2 class="grow">Total Distance</h2>
            <div class="flex flex-row gap-2">
                <b hx-get="/ride/total" hx-swap="innerHTML" hx-trigger="reload-total from:body">
                    {% include "rides/total.html" %}
                </b>
                km
            </div>
        </div>
        <ul id="rides" class="flex flex-col gap-2">
            {% for group in groups %}
            {% let RideGroupTemplate { date, rides, total } = group %}
            {% include "rides/group.html" %}
            {% endfor %}
        </ul>
    </div>
</div>

{% endblock %}
